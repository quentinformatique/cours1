-- Modification du format de date pour être conforme aux données à insérer
ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD';

-- Création des tables
CREATE TABLE personne (
	idPersonne	NUMBER(38,0),
	nom	VARCHAR2(50),
	prenom	VARCHAR2(50),
	PRIMARY KEY(idPersonne)
);
CREATE TABLE cinema (
	idCinema	NUMBER(38,0),
	nom	VARCHAR2(50),
	adresse	VARCHAR2(50),
	PRIMARY KEY(idCinema)
);
CREATE TABLE film (
	idFilm	NUMBER(38,0),
	idRealisateur	NUMBER(38,0),
	titre	VARCHAR2(50),
	genre	VARCHAR2(50),
	annee	NUMBER(38,0),
	budget	NUMBER(38,0),
	PRIMARY KEY(idFilm),
	FOREIGN KEY(idRealisateur) REFERENCES personne(idPersonne)
);
CREATE TABLE projection (
	idCinema	NUMBER(38,0),
	idFilm	NUMBER(38,0),
	jour	DATE,
	CONSTRAINT PK_projection PRIMARY KEY(idCinema,idFilm,jour),
	FOREIGN KEY(idFilm) REFERENCES film(idFilm),
	FOREIGN KEY(idCinema) REFERENCES cinema(idCinema)
);
CREATE TABLE jouer (
	idActeur	NUMBER(38,0),
	idFilm	NUMBER(38,0),
	role	VARCHAR2(50),
	PRIMARY KEY(idActeur,idFilm),
	FOREIGN KEY(idFilm) REFERENCES film(idFilm),
	FOREIGN KEY(idActeur) REFERENCES personne(idPersonne)
);

--Insertion des données
INSERT INTO personne VALUES (1,'Kidman','Nicole');
INSERT INTO personne VALUES (2,'Bettany','Paul');
INSERT INTO personne VALUES (3,'Watson','Emily');
INSERT INTO personne VALUES (4,'Skarsgard','Stellan');
INSERT INTO personne VALUES (5,'Travolta','John');
INSERT INTO personne VALUES (6,'L. Jackson','Samuel');
INSERT INTO personne VALUES (8,'Irons','Jeremy');
INSERT INTO personne VALUES (9,'Spader','James');
INSERT INTO personne VALUES (10,'Hunter','Holly');
INSERT INTO personne VALUES (11,'Arquette','Rosanna');
INSERT INTO personne VALUES (12,'Wayne','John');
INSERT INTO personne VALUES (13,'von Trier','Lars');
INSERT INTO personne VALUES (14,'Tarantino','Quentin');
INSERT INTO personne VALUES (15,'Cronenberg','David');
INSERT INTO personne VALUES (16,'Mazursky','Paul');
INSERT INTO personne VALUES (17,'Jones','Grace');
INSERT INTO personne VALUES (18,'Glen','John');
INSERT INTO personne VALUES (19,'Eastwood','Clint');
INSERT INTO personne VALUES (20,'Spacey','Kevin');
INSERT INTO personne VALUES (21,'Mendes','Sam');
INSERT INTO personne VALUES (22,'Jolie','Angelina');
INSERT INTO personne VALUES (7,'Willis','Bruce');
INSERT INTO cinema VALUES (2,'Le Fontenelle','78160 Marly-le-Roi');
INSERT INTO cinema VALUES (1,'Le Renoir','13100 Aix-en-Provence');
INSERT INTO cinema VALUES (3,'Gaumont Wilson','31000 Toulouse');
INSERT INTO cinema VALUES (4,'Espace Ciné','93800 Epinay-sur-Seine');
INSERT INTO film VALUES (1,15,'Crash','Drame',1996,9000000);
INSERT INTO film VALUES (2,15,'Faux-Semblants','Epouvante',1988,13000000 );
INSERT INTO film VALUES (3,14,'Pulp Fiction','Policier',1994,8500000);
INSERT INTO film VALUES (4,13,'Breaking the waves','Drame',1996,7500000);
INSERT INTO film VALUES (5,13,'Dogville','Drame',2002,10000000);
INSERT INTO film VALUES (6,12,'Alamo','Western',1960,12000000);
INSERT INTO film VALUES (7,18,'Dangereusement vôtre','Espionnage',1985, 30000000);
INSERT INTO film VALUES (8,19,'Chasseur blanc, coeur noir','Drame',1989, 24000000);
INSERT INTO film VALUES (10,21,'American Beauty','Drame',1999,15000000);
INSERT INTO film VALUES (9,19,'Minuit dans le jardin du bien et du mal','Drame',1997,30000000);
INSERT INTO projection VALUES (2,5,'2002-05-01');
INSERT INTO projection VALUES (2,5,'2002-05-02');
INSERT INTO projection VALUES (2,5,'2002-05-03');
INSERT INTO projection VALUES (2,4,'1996-12-02');
INSERT INTO projection VALUES (1,1,'1996-05-07');
INSERT INTO projection VALUES (2,7,'1985-05-09');
INSERT INTO projection VALUES (1,4,'1996-08-02');
INSERT INTO projection VALUES (4,3,'1994-04-08');
INSERT INTO projection VALUES (3,6,'1990-12-02');
INSERT INTO projection VALUES (2,2,'1990-12-08');
INSERT INTO projection VALUES (3,3,'1994-11-05');
INSERT INTO projection VALUES (4,3,'1994-11-06');
INSERT INTO projection VALUES (1,6,'1980-07-05');
INSERT INTO projection VALUES (2,4,'1996-09-02');
INSERT INTO projection VALUES (4,6,'2002-08-01');
INSERT INTO projection VALUES (3,6,'1960-11-09');
INSERT INTO projection VALUES (1,2,'1988-03-12');
INSERT INTO projection VALUES (2,8,'1989-02-01');
INSERT INTO projection VALUES (2,1,'1997-05-11');
INSERT INTO projection VALUES (2,3,'1994-07-05');
INSERT INTO projection VALUES (2,6,'2002-08-01');
INSERT INTO projection VALUES (1,3,'1994-03-02');
INSERT INTO projection VALUES (2,9,'2008-12-02');
INSERT INTO projection VALUES (2,10,'2000-10-03');
INSERT INTO projection VALUES (2,10,'2004-03-02');
INSERT INTO jouer VALUES (1,5,'Grace');
INSERT INTO jouer VALUES (2,5,'Tom Edison');
INSERT INTO jouer VALUES (3,4,'Bess');
INSERT INTO jouer VALUES (4,4,'Jan');
INSERT INTO jouer VALUES (5,3,'Vincent Vega');
INSERT INTO jouer VALUES (6,3,'Jules Winnfield');
INSERT INTO jouer VALUES (7,3,'Butch Coolidge');
INSERT INTO jouer VALUES (8,2,'Beverly {&} Elliot Mantle');
INSERT INTO jouer VALUES (9,1,'James Ballard');
INSERT INTO jouer VALUES (10,1,'Helen Remington');
INSERT INTO jouer VALUES (11,1,'Gabrielle');
INSERT INTO jouer VALUES (14, 3, 'Jimmy');
INSERT INTO jouer VALUES (4,5,'Chuck');
INSERT INTO jouer VALUES (16,7,'May Day');
INSERT INTO jouer VALUES (19,8,'John Wilson');
INSERT INTO jouer VALUES (20,9,'Jim Williams');
INSERT INTO jouer VALUES (20,10,'Lester Burnham');


-- Pour vider la base de données :
/* 
DROP TABLE projection;
DROP TABLE jouer;
DROP TABLE film;
DROP TABLE cinema;
DROP TABLE personne;
*/
